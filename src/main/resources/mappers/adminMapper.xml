<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.javagreenS.dao.AdminDAO">
  
  <select id="totRecQrCodeTicket" resultType="int">
    <if test="startJumun == ''">
      select count(*) from qrCode;
    </if>
    <if test="startJumun != ''">
      SELECT count(*) FROM qrCode 
      <![CDATA[ WHERE date(concat(substring(qrCode,1,4),"-",substring(qrCode,5,2),"-",substring(qrCode,7,2))) >= date(#{startJumun}) AND date(concat(substring(qrCode,1,4),"-",substring(qrCode,5,2),"-",substring(qrCode,7,2))) <= date(#{endJumun}) ]]>;
    </if>
  </select>
  
  <select id="getQrCodeCondition" resultType="com.spring.javagreenS.vo.QrCodeVO">
    <if test="startJumun == ''">
      select * from qrCode order by idx desc limit #{startIndexNo},#{pageSize};
    </if>
    <if test="startJumun != ''">
      SELECT * FROM qrCode 
      <![CDATA[ WHERE date(concat(substring(qrCode,1,4),"-",substring(qrCode,5,2),"-",substring(qrCode,7,2))) >= date(#{startJumun}) AND date(concat(substring(qrCode,1,4),"-",substring(qrCode,5,2),"-",substring(qrCode,7,2))) <= date(#{endJumun}) ]]>
      order by idx desc limit #{startIndexNo},#{pageSize};
    </if>
  </select>
  
  <select id="getQrCodeName" resultType="String">
    select qrCode from qrCode where idx = #{idx};
  </select>
  
  
  
  <delete id="setQrCodeDelete">
    delete from qrCode where idx = #{vo.idx};
  </delete>
  
  <delete id="setQrCodeSelectDelete">
    delete from qrCode where idx = #{idx};
  </delete>
  
</mapper>